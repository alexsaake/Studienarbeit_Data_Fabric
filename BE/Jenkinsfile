pipeline {
    agent any

    stages {
        stage('build') {
            steps {
                sh 'mvn --version'
            }
        }
        stage("Compilation") {
           steps {
                sh "./mvnw clean install -DskipTests"
            }
        }

        stage("Tests and Deployment") {
            steps {
                echo 'Runing unit tests'
                //sh "./mvnw test -Punit"
             }
            steps {
                echo 'Deployment'
                sh 'nohup ./mvnw spring-boot:run -Dserver.port=8001 &'
             }
         }
    }
}